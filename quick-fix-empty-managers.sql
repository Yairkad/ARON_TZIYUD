-- ================================================
-- תיקון מהיר - מילוי נתונים זמניים לערים
-- ================================================
-- סקריפט זה ממלא נתונים זמניים בשדות החובה
-- כדי שהאפליקציה תוכל לעבוד
-- אחרי זה תוכל לערוך את הנתונים דרך הממשק
-- ================================================

-- עדכן את הערים הקיימות עם נתונים זמניים
-- רק אם השדות ריקים

UPDATE cities
SET
    manager1_name = COALESCE(NULLIF(manager1_name, ''), 'מנהל זמני'),
    manager1_phone = COALESCE(NULLIF(manager1_phone, ''), '0500000000')
WHERE manager1_name IS NULL OR manager1_name = ''
   OR manager1_phone IS NULL OR manager1_phone = '';

-- בדוק את התוצאה
SELECT
    name AS "עיר",
    manager1_name AS "מנהל 1",
    manager1_phone AS "טלפון 1",
    manager2_name AS "מנהל 2",
    manager2_phone AS "טלפון 2",
    CASE WHEN location_url IS NOT NULL THEN '✅' ELSE '❌' END AS "מיקום",
    is_active AS "פעיל"
FROM cities
ORDER BY name;

-- ================================================
-- שלב הבא:
-- ================================================
-- 1. הרץ את הסקריפט הזה ב-Supabase SQL Editor
-- 2. חכה שה-deployment ב-Vercel יצליח (יקח כ-2 דקות)
-- 3. היכנס לממשק הניהול המרכזי באתר
-- 4. ערוך כל עיר ומלא את הנתונים האמיתיים:
--    - שם מנהל 1
--    - טלפון מנהל 1
--    - שם מנהל 2 (אופציונלי)
--    - טלפון מנהל 2 (אופציונלי)
--    - קישור Google Maps (אופציונלי)
-- ================================================
