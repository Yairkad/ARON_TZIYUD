# Changelog - ארון ציוד ידידים

## [2.5.0] - 18 נובמבר 2024

### ✨ תכונות חדשות

#### 🎯 מערכת מיון אוטומטי לפי שימושיות
- **חישוב אוטומטי**: המערכת מנתחת את היסטוריית ההשאלות ומדרגת ציוד לפי תדירות שימוש
- **ייחודי לכל עיר**: כל עיר מקבלת מיון מותאם לפי הצרכים שלה
- **חלון זמן חכם**: מבוסס על 6 חודשים אחרונים לרלוונטיות מקסימלית
- **עדכון יומי**: Cron job אוטומטי ב-Vercel מעדכן כל לילה ב-3:00
- **API ידני**: אפשרות להפעיל ידנית דרך `/api/recalculate-priority`
- קבצים: `calculate-display-order-from-usage.sql`, `PRIORITY_CALCULATION.md`

#### 📸 תמיכה בתמונות ציוד דרך Google Drive
- **חיסכון במקום**: שימוש בקישורים ל-Google Drive במקום אחסון ב-Supabase Storage
- **שדה URL בעריכה**: אפשרות להוסיף/לעדכן תמונות בהוספת ציוד ובעריכת פריטים קיימים
- **כלי עזר מקצועיים**:
  - **המרת קישורים**: המרה אוטומטית מקישורי Google Drive לקישורים ישירים
  - **הורדת תמונות**: גיבוי כל התמונות מ-Storage
  - **מחיקה מאורגנת**: מחיקת תמונות מ-Storage אחרי מעבר ל-Drive
- תיקייה חדשה: `tools/` עם כל הכלים

#### 🏷️ סינון לפי קטגוריות
- **טאב "הכל"**: צפייה בכל הציוד
- **סינון דינמי**: לחיצה על קטגוריה מסננת רק פריטים רלוונטיים
- **UX משופר**: שדה החיפוש בטבלה מתמזג עם הסינון

#### 📦 בחירת ציוד מרובה
- **גם בהשאלה ישירה**: לא רק במצב בקשה - עכשיו גם בהשאלה ישירה
- **טבלה מתקפלת**: שמירה על ממשק נקי
- **פריטים נבחרים בראש**: פריטים שנבחרו עולים לראש הרשימה
- **תמיכה במתכלים**: אפשרות לבחור כמות לפריטים מתכלים

### 🎨 שיפורי UI/UX

#### 📱 שורת קטגוריות דביקה (Sticky)
- **תמיד נגישה**: שורת הקטגוריות נשארת בראש המסך בגלילה
- **רקע גרדיאנט**: עיצוב מרגיע עם גרדיאנט כחול-לבן
- **z-index מתוקן**: הקטגוריות תמיד מעל התוכן
- **רספונסיבי**: עובד מצוין במובייל ובדסקטופ

#### 🖼️ תצוגת תמונות בניהול מלאי
- **עריכת תמונה בדסקטופ**: שורה מלאה נפרדת עם שדה גדול
- **עריכת תמונה במובייל**: משולב בטופס העריכה
- **טיפ מועיל**: הסבר איך להעלות ל-Google Drive

### 🔧 תיקוני באגים
- **תיקון z-index**: קטגוריות לא מתחבאות מאחורי תוכן אחר
- **תיקון Fragment**: שימוש ב-`React.Fragment` לטבלאות מרובות שורות
- **תיקון גרדיאנט**: גרדיאנט הפוך - כחול למטה

### 📁 ארגון פרויקט
- **תיקיית tools/**: כל כלי העזר במקום אחד מאורגן
- **תיעוד מקיף**: README מפורט לתיקיית tools
- **ניקיון קבצים**: הסרת קבצים זמניים ישנים
- **מסמכים עדכניים**: README ראשי מעודכן עם כל התכונות

### 📊 מבנה מסד נתונים
- **עמודה חדשה**: `display_order` בטבלת `equipment`
- **אינדקסים**: אינדקסים ל-performance טוב יותר
- **פונקציה**: `recalculate_equipment_priority()` לעדכון אוטומטי

### ⚙️ תשתית
- **Vercel Cron**: הוספת `vercel.json` עם cron job יומי
- **API Endpoint**: `/api/recalculate-priority` לעדכון ידני
- **Service Worker**: תמיכה ב-background sync

---

## [2.4.0] - נובמבר 2024

### תכונות קודמות
- מערכת אימות משתמשים
- ניהול הרשאות (view_only, approve_requests, full_access)
- התראות דוא"ל
- ייצוא לאקסל
- הדפסה
- חיפוש ערים
- ניהול קטגוריות

---

## קישורים

- **תיעוד מיון אוטומטי**: [PRIORITY_CALCULATION.md](./PRIORITY_CALCULATION.md)
- **כלי עזר**: [tools/README.md](./tools/README.md)
- **מדריך משתמש**: [USER_GUIDE.md](./USER_GUIDE.md)
- **API Documentation**: [QUICK_START.md](./QUICK_START.md)
