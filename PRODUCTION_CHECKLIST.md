# ✅ רשימת בדיקות להפעלה רשמית - ארון הציוד

## לפני ההפעלה הרשמית

### 1. הגדרות Resend למיילים ✉️

- [ ] יצרתי חשבון ב-https://resend.com
- [ ] קיבלתי API Key מ-Resend
- [ ] הוספתי את ה-API Key ל-Vercel Environment Variables
- [ ] הגדרתי `EMAIL_FROM` (לפחות `onboarding@resend.dev`)
- [ ] (אופציונלי) אימתתי דומיין מותאם אישית
- [ ] בדקתי שליחת מייל אימות למנהל חדש
- [ ] בדקתי איפוס סיסמה במייל

### 2. הגדרות Vercel 🚀

- [ ] URL ייצור: `https://aron-tziyud.vercel.app`
- [ ] הוספתי את כל משתני הסביבה:
  - [ ] `NEXT_PUBLIC_SUPABASE_URL`
  - [ ] `NEXT_PUBLIC_SUPABASE_ANON_KEY`
  - [ ] `SUPABASE_SERVICE_ROLE_KEY`
  - [ ] `RESEND_API_KEY`
  - [ ] `EMAIL_FROM`
  - [ ] `NEXT_PUBLIC_APP_URL=https://aron-tziyud.vercel.app`
  - [ ] `NEXT_PUBLIC_VAPID_PUBLIC_KEY`
  - [ ] `VAPID_PRIVATE_KEY`
  - [ ] `VAPID_MAILTO`
- [ ] עשיתי Redeploy אחרי הוספת משתני סביבה

### 3. הגדרות Supabase 🗄️

- [ ] Row Level Security (RLS) מופעל על כל הטבלאות
- [ ] בדקתי שמנהלים יכולים לגשת רק לעיר שלהם
- [ ] בדקתי שמשתמשים לא יכולים לגשת לטבלאות ניהול
- [ ] יש גיבוי אוטומטי (Supabase מספק)
- [ ] שמרתי את פרטי החיבור במקום בטוח

### 4. אבטחה 🔒

#### משתמש Super Admin:
- [ ] יצרתי משתמש Super Admin עם מייל אמיתי
- [ ] אימתתי את כתובת המייל
- [ ] הגדרתי סיסמה חזקה (8+ תווים, מספרים, אותיות)
- [ ] בדקתי גישה למסך Super Admin

#### ערים:
- [ ] שיניתי סיסמאות ברירת מחדל של כל הערים
- [ ] סיסמאות מאוחסנות מוצפנות (bcrypt)
- [ ] בדקתי שעיר אחת לא יכולה לגשת לנתוני עיר אחרת

#### מנהלי ערים:
- [ ] יצרתי מנהלים עם מיילים אמיתיים
- [ ] כל מנהל אימת את המייל שלו
- [ ] מנהלים הגדירו סיסמאות משלהם

### 5. בדיקות פונקציונליות 🧪

#### תהליך השאלה ישירה (Direct Mode):
- [ ] בדקתי בחירת ציוד והשאלה מיידית
- [ ] המלאי מתעדכן אחרי השאלה
- [ ] ההיסטוריה נשמרת נכון
- [ ] החזרת ציוד עובדת
- [ ] המלאי חוזר אחרי החזרה

#### תהליך בקשות (Request Mode):
- [ ] בדקתי יצירת בקשה
- [ ] בדקתי קבלת התראת Push למנהל
- [ ] בדקתי אישור בקשה ושליחת טוקן
- [ ] בדקתי שהטוקן עובד נכון
- [ ] בדקתי איסוף ציוד דרך הטוקן
- [ ] בדקתי דחיית בקשה
- [ ] בדקתי ביטול בקשה
- [ ] בדקתי יצירת טוקן חדש

#### ניהול מלאי:
- [ ] בדקתי הוספת ציוד חדש
- [ ] בדקתי עריכת ציוד קיים
- [ ] בדקתי מחיקת ציוד
- [ ] בדקתי סימון ציוד כתקול
- [ ] בדקתי ציוד מתכלה vs לא מתכלה

#### דוחות והיסטוריה:
- [ ] בדקתי היסטוריית השאלות
- [ ] בדקתי סינון לפי תאריכים
- [ ] בדקתי ייצוא לExcel
- [ ] בדקתי היסטוריית פעולות מנהלים
- [ ] בדקתי סטטיסטיקות

#### התראות Push:
- [ ] בדקתי הרשמה להתראות
- [ ] בדקתי קבלת התראה על בקשה חדשה
- [ ] בדקתי התראות על ציוד שלא הוחזר
- [ ] בדקתי ביטול התראות

### 6. בדיקות מובייל 📱

- [ ] בדקתי על Android Chrome
- [ ] בדקתי על iOS Safari
- [ ] בדקתי PWA (Add to Home Screen)
- [ ] בדקתי התראות Push במובייל
- [ ] בדקתי ניווט עם Waze/Google Maps
- [ ] בדקתי שליחת WhatsApp

### 7. תוכן ותצוגה 🎨

- [ ] כל הטקסטים בעברית נכונה
- [ ] אין שגיאות כתיב
- [ ] הלוגו מוצג נכון
- [ ] הצבעים עקביים
- [ ] כל האייקונים מוצגים
- [ ] הדף הראשי ברור וידידותי

### 8. הגדרות ערים 🏙️

לכל עיר, וידא:
- [ ] שם העיר נכון
- [ ] פרטי מנהל 1 נכונים (שם + טלפון)
- [ ] פרטי מנהל 2 נכונים (אם יש)
- [ ] מיקום הארון (Google Maps link)
- [ ] קוד ארון (אם יש)
- [ ] מצב ההשאלה (Direct/Request)
- [ ] דרישת מזהה קריאה (אם רלוונטי)
- [ ] הסתרת ניווט (אם רלוונטי)
- [ ] התראות Push מופעלות

### 9. תרחישי קצה 🔍

- [ ] בדקתי ניסיון השאלה של ציוד שאזל
- [ ] בדקתי ניסיון השאלה של ציוד תקול
- [ ] בדקתי טוקן שפג תוקפו
- [ ] בדקתי ניסיון גישה לעיר לא פעילה
- [ ] בדקתי התנתקות באמצע תהליך
- [ ] בדקתי חיבור אינטרנט חלש

### 10. ביצועים ⚡

- [ ] הדף הראשי נטען מהר (<3 שניות)
- [ ] החלפה בין דפים חלקה
- [ ] התמונות נטענות מהר
- [ ] אין עיכובים בטעינת נתונים
- [ ] המערכת עובדת טוב עם אינטרנט איטי

### 11. תיעוד 📚

- [ ] יש הנחיות למנהלים
- [ ] יש הנחיות למשתמשים בדף הבית
- [ ] מפורט איך לבצע פעולות נפוצות
- [ ] יש איש קשר לתמיכה

### 12. גיבוי וחירום 🆘

- [ ] יש גיבוי אוטומטי ב-Supabase
- [ ] שמרתי העתק של משתני הסביבה
- [ ] יש מי שיודע לתקן בעיות (אתה או מישהו נוסף)
- [ ] שמרתי גישה למנהל ראשי
- [ ] יש תכנית למקרה של בעיה חמורה

## אחרי ההפעלה

### שבוע ראשון:
- [ ] בדוק מיילים ב-Resend Dashboard
- [ ] בדוק logs ב-Vercel
- [ ] בדוק פעילות ב-Supabase
- [ ] שאל משוב ממנהלים ומשתמשים
- [ ] תקן בעיות קטנות שמתגלות

### חודש ראשון:
- [ ] בדוק סטטיסטיקות שימוש
- [ ] בדוק מכסת מיילים ב-Resend
- [ ] בדוק שאין ציוד שלא הוחזר מזמן
- [ ] בדוק שהמערכת יציבה
- [ ] אסוף משוב ושפר

## בעיות נפוצות ופתרונות 🔧

### מיילים לא נשלחים:
1. בדוק ש-`RESEND_API_KEY` מוגדר ב-Vercel
2. בדוק ב-Resend Dashboard אם יש שגיאות
3. בדוק שלא עברת את מכסת המיילים
4. בדוק שכתובת המייל תקינה

### התראות Push לא עובדות:
1. בדוק ש-`VAPID` keys מוגדרים ב-Vercel
2. בדוק שהמשתמש נתן הרשאה להתראות
3. בדוק שה-PWA מותקן נכון
4. בדוק ב-Console אם יש שגיאות

### ציוד לא מתעדכן:
1. בדוק את ה-RLS policies ב-Supabase
2. בדוק ב-Network tab אם ה-API calls מצליחים
3. רענן את הדף
4. בדוק ב-Supabase Dashboard את הנתונים

### משתמשים לא יכולים להתחבר:
1. בדוק שהסיסמה נכונה
2. בדוק שהמשתמש/עיר פעיל (`is_active=true`)
3. בדוק שהמייל אומת (למנהלים)
4. נסה איפוס סיסמה

## אנשי קשר 📞

- **מנהל מערכת:** [השם שלך]
- **טלפון:** [הטלפון שלך]
- **מייל:** [המייל שלך]
- **תמיכה טכנית:**
  - Vercel: https://vercel.com/support
  - Supabase: https://supabase.com/docs/support
  - Resend: https://resend.com/support

---

## סיימת? 🎉

כשהכל מסומן, המערכת מוכנה לשימוש רשמי!

**בהצלחה! 🚀**
